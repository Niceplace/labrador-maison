version: "3"
services:
  container-registry:
    container_name: registry
    image: registry:2.8
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.container-registry.rule=Host(`registry.thinkcenter.dev`)"
      - "traefik.http.routers.container-registry.entrypoints=websecure"
      - "traefik.http.routers.container-registry.tls=true"
      - "traefik.http.services.container-registry.loadbalancer.server.port=5000"
    networks:
      - default
    environment:
      REGISTRY_HTTP_HOST: "https://registry.thinkcenter.dev"

networks:
  default:
    external: true
    name: thinknetwork
